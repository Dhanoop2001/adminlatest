"use strict";(self["webpackChunkparlouradmin"]=self["webpackChunkparlouradmin"]||[]).push([[159],{159:function(e,a,l){l.r(a),l.d(a,{default:function(){return H}});var s=l(6768),i=l(4232),n=l(5130);const t={class:"admin-panel-container"},o={class:"sidebar"},c={class:"menu"},r={class:"main-content"},d={class:"panel-content"},u={class:"tabs-container"},p={key:0,class:"loading-container"},k={key:1,class:"table-container"},v={class:"table-header"},g={class:"table-body"},L={key:0,class:"empty-state"},m={class:"table-cell"},h={class:"table-cell"},b={class:"table-cell"},f={class:"table-cell"},C=["onClick"],y={class:"table-cell"},P={class:"table-cell email"},A={class:"table-cell"},D={class:"table-cell lat"},I={class:"table-cell longitude"},N={class:"table-cell description"},E={class:"table-cell actions"},_=["onClick"],X=["onClick"],x={key:0,class:"dialog-backdrop"},W={class:"dialog-card"},$={class:"dialog-footer"},w={key:1,class:"dialog-backdrop"},U={class:"dialog-card"},B={class:"dialog-footer"},Q={key:2,class:"popup-backdrop"},S={class:"popup-card"},T={class:"popup-header"},z={class:"popup-body"},F=["src"],R={key:1};function q(e,a,l,q,K,j){return(0,s.uX)(),(0,s.CE)("div",t,[a[32]||(a[32]=(0,s.Fv)('<div class="animated-shapes" data-v-45351440><div class="circle circle-1" data-v-45351440></div><div class="circle circle-2" data-v-45351440></div><div class="circle circle-3" data-v-45351440></div><div class="circle circle-4" data-v-45351440></div></div>',1)),(0,s.Lk)("div",o,[a[14]||(a[14]=(0,s.Lk)("div",{class:"brand-logo"},[(0,s.Lk)("span",{class:"logo-icon"},[(0,s.Lk)("i",{class:"fas fa-spa"})]),(0,s.Lk)("h2",{class:"brand-name"},"SalonInfo")],-1)),(0,s.Lk)("div",c,[a[11]||(a[11]=(0,s.Lk)("div",{class:"menu-item active"},[(0,s.Lk)("i",{class:"icon dashboard-icon"},"◙"),(0,s.Lk)("span",null,"Dashboard")],-1)),(0,s.Lk)("div",{class:"menu-item",onClick:a[0]||(a[0]=(...e)=>j.navigateToAdminPanel&&j.navigateToAdminPanel(...e))},a[9]||(a[9]=[(0,s.Lk)("i",{class:"icon parlour-icon"},"✂",-1),(0,s.Lk)("span",null,"Admin Panel",-1)])),a[12]||(a[12]=(0,s.Lk)("div",{class:"menu-item"},[(0,s.Lk)("i",{class:"icon offer-icon"},"🎁"),(0,s.Lk)("span",null,"Offers")],-1)),a[13]||(a[13]=(0,s.Lk)("div",{class:"menu-item"},[(0,s.Lk)("i",{class:"icon category-icon"},"📁"),(0,s.Lk)("span",null,"Categories")],-1)),(0,s.Lk)("div",{class:"menu-item logout",onClick:a[1]||(a[1]=(...e)=>j.logout&&j.logout(...e))},a[10]||(a[10]=[(0,s.Lk)("i",{class:"icon logout-icon"},"↪",-1),(0,s.Lk)("span",null,"Logout",-1)]))])]),(0,s.Lk)("div",r,[(0,s.Lk)("div",d,[a[21]||(a[21]=(0,s.Lk)("div",{class:"panel-header"},[(0,s.Lk)("h1",{class:"page-title"},[(0,s.eW)("Admin "),(0,s.Lk)("span",null,"Approval")])],-1)),(0,s.Lk)("div",u,[(0,s.Lk)("button",{onClick:a[2]||(a[2]=e=>K.tab="pending"),class:(0,i.C4)(["tab-button",{active:"pending"===K.tab}])},a[15]||(a[15]=[(0,s.Lk)("i",{class:"fas fa-clock"},null,-1),(0,s.eW)(" Pending Requests ")]),2),(0,s.Lk)("button",{onClick:a[3]||(a[3]=e=>K.tab="approved"),class:(0,i.C4)(["tab-button",{active:"approved"===K.tab}])},a[16]||(a[16]=[(0,s.Lk)("i",{class:"fas fa-check-circle"},null,-1),(0,s.eW)(" Approved Requests ")]),2)]),K.loading?((0,s.uX)(),(0,s.CE)("div",p,a[17]||(a[17]=[(0,s.Lk)("div",{class:"spinner"},null,-1)]))):((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("div",v,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(K.headers,(e=>((0,s.uX)(),(0,s.CE)("span",{key:e.value,class:"table-header-cell"},(0,i.v_)(e.text),1)))),128))]),(0,s.Lk)("div",g,[0===("pending"===K.tab?j.pendingParlours:j.approvedParlours).length?((0,s.uX)(),(0,s.CE)("div",L,[a[18]||(a[18]=(0,s.Lk)("i",{class:"fas fa-folder-open"},null,-1)),(0,s.Lk)("p",null,"No "+(0,i.v_)(K.tab)+" parlours found",1)])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)("pending"===K.tab?j.pendingParlours:j.approvedParlours,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"table-row"},[(0,s.Lk)("span",m,(0,i.v_)(e.sl_no),1),(0,s.Lk)("span",h,(0,i.v_)(e.id),1),(0,s.Lk)("span",b,(0,i.v_)(e.parlourName),1),(0,s.Lk)("span",f,[(0,s.Lk)("a",{href:"#",onClick:(0,n.D$)((a=>j.openLicensePopup(e.licenseNumber,e.licenseImage)),["prevent"])},(0,i.v_)(e.licenseNumber),9,C)]),(0,s.Lk)("span",y,(0,i.v_)(e.phoneNumber||"N/A"),1),(0,s.Lk)("span",P,(0,i.v_)(e.email),1),(0,s.Lk)("span",A,(0,i.v_)(e.location),1),(0,s.Lk)("span",D,(0,i.v_)(e.latitude),1),(0,s.Lk)("span",I,(0,i.v_)(e.longitude),1),(0,s.Lk)("span",N,(0,i.v_)(e.description),1),(0,s.Lk)("span",E,["pending"===K.tab?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"action-button approve",onClick:a=>j.openApproveDialog(e.id),title:"Approve"},a[19]||(a[19]=[(0,s.Lk)("i",{class:"fas fa-check"},null,-1)]),8,_)):(0,s.Q3)("",!0),(0,s.Lk)("button",{class:"action-button decline",onClick:a=>j.openDeclineDialog(e.id),title:"Decline"},a[20]||(a[20]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]),8,X)])])))),128))])]))])]),K.approveDialog?((0,s.uX)(),(0,s.CE)("div",x,[(0,s.Lk)("div",W,[a[24]||(a[24]=(0,s.Lk)("div",{class:"dialog-header"},[(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-check-circle"}),(0,s.eW)(" Confirm Approval")])],-1)),a[25]||(a[25]=(0,s.Lk)("div",{class:"dialog-body"},[(0,s.Lk)("p",null,"Are you sure you want to approve this parlour?")],-1)),(0,s.Lk)("div",$,[(0,s.Lk)("button",{class:"dialog-button cancel",onClick:a[4]||(a[4]=e=>K.approveDialog=!1)},a[22]||(a[22]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1),(0,s.eW)(" Cancel ")])),(0,s.Lk)("button",{class:"dialog-button confirm",onClick:a[5]||(a[5]=e=>j.confirmApprove(K.selectedParlourId))},a[23]||(a[23]=[(0,s.Lk)("i",{class:"fas fa-check"},null,-1),(0,s.eW)(" Approve ")]))])])])):(0,s.Q3)("",!0),K.declineDialog?((0,s.uX)(),(0,s.CE)("div",w,[(0,s.Lk)("div",U,[a[28]||(a[28]=(0,s.Lk)("div",{class:"dialog-header"},[(0,s.Lk)("h3",null,[(0,s.Lk)("i",{class:"fas fa-exclamation-triangle"}),(0,s.eW)(" Confirm Decline")])],-1)),a[29]||(a[29]=(0,s.Lk)("div",{class:"dialog-body"},[(0,s.Lk)("p",null,"Are you sure you want to decline this parlour?")],-1)),(0,s.Lk)("div",B,[(0,s.Lk)("button",{class:"dialog-button cancel",onClick:a[6]||(a[6]=e=>K.declineDialog=!1)},a[26]||(a[26]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1),(0,s.eW)(" Cancel ")])),(0,s.Lk)("button",{class:"dialog-button confirm",onClick:a[7]||(a[7]=e=>j.confirmDecline(K.selectedParlourId))},a[27]||(a[27]=[(0,s.Lk)("i",{class:"fas fa-check"},null,-1),(0,s.eW)(" Decline ")]))])])])):(0,s.Q3)("",!0),K.licensePopup?((0,s.uX)(),(0,s.CE)("div",Q,[(0,s.Lk)("div",S,[(0,s.Lk)("div",T,[a[30]||(a[30]=(0,s.Lk)("h3",null,"License Information",-1)),(0,s.Lk)("button",{class:"close-button",onClick:a[8]||(a[8]=e=>K.licensePopup=!1)},"✖")]),(0,s.Lk)("div",z,[(0,s.Lk)("p",null,[a[31]||(a[31]=(0,s.Lk)("strong",null,"License Number:",-1)),(0,s.eW)(" "+(0,i.v_)(K.selectedLicenseNumber),1)]),K.selectedImageUrl?((0,s.uX)(),(0,s.CE)("img",{key:0,src:K.selectedImageUrl,alt:"License Image",class:"license-image"},null,8,F)):((0,s.uX)(),(0,s.CE)("p",R,"No image available"))])])])):(0,s.Q3)("",!0)])}l(4114),l(6573),l(8100),l(7936),l(7467),l(4732),l(9577),l(8992),l(4520),l(1454),l(4979);var K=l(4373),j={data(){return{tab:"pending",loading:!1,parlours:[],approveDialog:!1,declineDialog:!1,licensePopup:!1,selectedLicenseNumber:null,selectedImageUrl:null,selectedParlourId:null,headers:[{text:"S.No",value:"sl_no"},{text:"ID",value:"id"},{text:"Parlour Name",value:"parlourName"},{text:"License",value:"licenseNumber"},{text:"Phone",value:"phone"},{text:"Email",value:"email"},{text:"Location",value:"location"},{text:"Latitude",value:"latitude"},{text:"Longitude",value:"longitude"},{text:"Description",value:"description"},{text:"Actions",value:"actions"}],token:null}},computed:{pendingParlours(){return this.parlours.filter((e=>0===e.status))},approvedParlours(){return this.parlours.filter((e=>1===e.status))}},methods:{async fetchParlours(){this.loading=!0;try{const e=await K.A.get("http://192.168.1.15:8086/api/admin/allRegisteredParlour",{headers:{Authorization:`Bearer ${this.token}`}});this.parlours=e.data.map(((e,a)=>({sl_no:a+1,id:e.id,parlourName:e.parlourName,licenseNumber:e.licenseNumber,phoneNumber:e.phoneNumber||"N/A",email:e.email,location:e.location,latitude:e.latitude,longitude:e.longitude,description:e.description,licenseImage:e.licenseImage,status:e.status})))}catch(e){console.error("Error fetching parlours:",e),e.response&&console.error("Error response data:",e.response.data)}finally{this.loading=!1}},navigateToAdminPanel(){this.$router.push({name:"AdminPanel"})},openApproveDialog(e){this.selectedParlourId=e,this.approveDialog=!0},async confirmApprove(e){if(e)try{await K.A.put(`http://192.168.1.15:8086/api/admin/approve?id=${e}&status=1`,{},{headers:{Authorization:`Bearer ${this.token}`}}),this.fetchParlours(),this.approveDialog=!1}catch(a){console.error("Error approving parlour:",a)}},openDeclineDialog(e){this.selectedParlourId=e,this.declineDialog=!0},async confirmDecline(e){if(e)try{await K.A.delete(`http://192.168.1.15:8086/api/admin/parlour/delete?id=${e}`,{headers:{Authorization:`Bearer ${this.token}`}}),this.fetchParlours(),this.declineDialog=!1}catch(a){console.error("Error declining parlour:",a)}},openLicensePopup(e,a){if(this.selectedLicenseNumber=e,a)if(a.startsWith("data:image/"))this.selectedImageUrl=a;else try{const e="string"===typeof a?a:this.binaryToBase64(a);this.selectedImageUrl=`data:image/jpeg;base64,${e}`}catch(l){console.error("Error converting license image to Base64:",l),this.selectedImageUrl=null}else this.selectedImageUrl=null;this.licensePopup=!0},binaryToBase64(e){const a=new Uint8Array(e);let l="";for(let s=0;s<a.length;s++)l+=String.fromCharCode(a[s]);return btoa(l)},logout(){sessionStorage.removeItem("admin_token"),this.$router.push({name:"Login"})}},mounted(){this.token=sessionStorage.getItem("admin_token"),this.token?this.fetchParlours():this.$router.push({name:"Login"})}},O=l(1241);const G=(0,O.A)(j,[["render",q],["__scopeId","data-v-45351440"]]);var H=G}}]);
//# sourceMappingURL=159.ffc1744c.js.map